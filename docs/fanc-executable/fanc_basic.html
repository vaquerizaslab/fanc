<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic usage &mdash; FAN-C 0.9.26b1-beta documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Working with Cooler, Juicer, and text files" href="compatibility.html" />
    <link rel="prev" title="FAN-C command line tools" href="../fanc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> FAN-C
          </a>
              <div class="version">
                0.9.26b1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started with FAN-C</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../fanc.html">fanc: command line tools</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#"> Overview and shared parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Positional Arguments">Positional Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#email-notifications">Email notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temporary-files">Temporary files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fan-c-config-files">FAN-C config files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Positional Arguments">Positional Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#numexpr-threadpool-configuration">NumExpr ThreadPool configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="compatibility.html"> Working with Cooler, Juicer, and text files</a></li>
<li class="toctree-l2"><a class="reference internal" href="fanc_generate_hic.html"> Generate Hi-C matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="fanc_analyse_hic.html"> Analyse Hi-C matrices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fancplot.html">fancplot: plotting from the command line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">Python API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FAN-C</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../fanc.html">FAN-C command line tools</a> &raquo;</li>
      <li>Basic usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/fanc-executable/fanc_basic.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-usage">
<h1>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">fanc</span></code> uses subcommands to run all of its analyses. The <code class="docutils literal notranslate"><span class="pre">fanc</span></code> command itself can
be used to get an overview of available subcommands, to print the current FAN-C version,
or to set logging and notification parameters that affect all subcommands.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">fanc</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>

<span class="o">--</span> <span class="n">Matrix</span> <span class="n">generation</span> <span class="o">--</span>
<span class="n">auto</span>              <span class="n">Automatically</span> <span class="n">process</span> <span class="n">an</span> <span class="n">entire</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="n">data</span> <span class="nb">set</span>
<span class="nb">map</span>               <span class="n">Map</span> <span class="n">reads</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">FASTQ</span> <span class="n">file</span> <span class="n">to</span> <span class="n">a</span> <span class="n">reference</span> <span class="n">genome</span>
<span class="n">pairs</span>             <span class="n">Process</span> <span class="ow">and</span> <span class="nb">filter</span> <span class="n">read</span> <span class="n">pairs</span>
<span class="n">hic</span>               <span class="n">Process</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="ow">and</span> <span class="n">correct</span> <span class="n">Hic</span> <span class="n">files</span>

<span class="o">--</span> <span class="n">Matrix</span> <span class="n">analysis</span> <span class="o">--</span>
<span class="n">cis</span><span class="o">-</span><span class="n">trans</span>         <span class="n">Calculate</span> <span class="n">cis</span><span class="o">/</span><span class="n">trans</span> <span class="n">ratio</span> <span class="n">of</span> <span class="n">this</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="nb">object</span>
<span class="n">expected</span>          <span class="n">Calculate</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="n">expected</span> <span class="n">values</span> <span class="p">(</span><span class="n">distance</span> <span class="n">decay</span><span class="p">)</span>
<span class="n">pca</span>               <span class="n">Do</span> <span class="n">a</span> <span class="n">PCA</span> <span class="n">on</span> <span class="n">multiple</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="n">objects</span>
<span class="n">compartments</span>      <span class="n">Calculate</span> <span class="n">AB</span> <span class="n">compartment</span> <span class="n">matrix</span>
<span class="n">insulation</span>        <span class="n">Calculate</span> <span class="n">insulation</span> <span class="n">scores</span> <span class="k">for</span> <span class="n">Hic</span> <span class="nb">object</span>
<span class="n">directionality</span>    <span class="n">Calculate</span> <span class="n">directionality</span> <span class="n">index</span> <span class="k">for</span> <span class="n">Hic</span> <span class="nb">object</span>
<span class="n">boundaries</span>        <span class="n">Determine</span> <span class="n">domain</span> <span class="n">boundaries</span>
<span class="n">compare</span>           <span class="n">Create</span> <span class="n">pairwise</span> <span class="n">comparisons</span> <span class="n">of</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="n">comparison</span> <span class="n">maps</span>
<span class="n">loops</span>             <span class="n">Call</span> <span class="n">loops</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">Hic</span> <span class="nb">object</span> <span class="n">using</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="n">implementation</span> <span class="n">of</span> <span class="n">HICCUPS</span>
<span class="n">aggregate</span>         <span class="n">Make</span> <span class="n">aggregate</span> <span class="n">plots</span> <span class="k">with</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span>

<span class="o">--</span> <span class="n">Other</span> <span class="n">helpers</span> <span class="o">--</span>
<span class="n">fragments</span>         <span class="n">In</span><span class="o">-</span><span class="n">silico</span> <span class="n">genome</span> <span class="n">digestion</span>
<span class="n">sort</span><span class="o">-</span><span class="n">sam</span>          <span class="n">Convenience</span> <span class="n">function</span> <span class="n">to</span> <span class="n">sort</span> <span class="n">a</span> <span class="n">SAM</span> <span class="n">file</span> <span class="n">by</span> <span class="n">name</span>
<span class="n">from</span><span class="o">-</span><span class="n">txt</span>          <span class="n">Import</span> <span class="n">a</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="nb">object</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">sparse</span> <span class="n">matrix</span> <span class="n">txt</span> <span class="nb">format</span>
<span class="n">to</span><span class="o">-</span><span class="n">fanc</span>           <span class="n">Convert</span> <span class="n">a</span> <span class="n">matrix</span> <span class="n">file</span> <span class="p">(</span><span class="n">Cooler</span><span class="p">,</span> <span class="n">Juicer</span><span class="p">)</span> <span class="n">file</span> <span class="n">to</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="nb">format</span>
<span class="n">to</span><span class="o">-</span><span class="n">cooler</span>         <span class="n">Convert</span> <span class="n">a</span> <span class="n">binned</span> <span class="n">Hic</span> <span class="n">file</span> <span class="n">into</span> <span class="n">cooler</span> <span class="nb">format</span>
<span class="n">to</span><span class="o">-</span><span class="n">juicer</span>         <span class="n">Convert</span> <span class="n">a</span> <span class="n">ReadPairs</span> <span class="n">file</span> <span class="n">to</span> <span class="n">Juicer</span> 
<span class="n">dump</span>              <span class="n">Dump</span> <span class="n">Hic</span> <span class="n">file</span> <span class="n">to</span> <span class="n">txt</span> <span class="n">file</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">overlap</span><span class="o">-</span><span class="n">peaks</span>     <span class="n">Overlap</span> <span class="n">peaks</span> <span class="kn">from</span> <span class="nn">multiple</span> <span class="n">samples</span>
<span class="n">write</span><span class="o">-</span><span class="n">config</span>      <span class="n">Write</span> <span class="n">default</span> <span class="n">config</span> <span class="n">file</span> <span class="n">to</span> <span class="n">specified</span> <span class="n">location</span>
<span class="n">downsample</span>        <span class="n">Downsample</span> <span class="n">contacts</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">Hic</span> <span class="nb">object</span>
<span class="n">upgrade</span>           <span class="n">Upgrade</span> <span class="n">objects</span> <span class="kn">from</span> <span class="nn">old</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="n">versions</span>

<span class="o">--</span> <span class="n">Deprecated</span> <span class="o">--</span>
<span class="n">from</span><span class="o">-</span><span class="n">juicer</span>       <span class="p">[</span><span class="n">deprecated</span><span class="p">]</span> <span class="n">Convert</span> <span class="n">Juicer</span> <span class="n">Hi</span><span class="o">-</span><span class="n">C</span> <span class="n">file</span> <span class="n">to</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="nb">format</span>
<span class="n">from</span><span class="o">-</span><span class="n">cooler</span>       <span class="p">[</span><span class="n">deprecated</span><span class="p">]</span> <span class="n">Convert</span> <span class="n">a</span> <span class="n">Cooler</span> <span class="n">file</span> <span class="n">to</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="nb">format</span>
<span class="n">stats</span>             <span class="p">[</span><span class="n">deprecated</span><span class="p">]</span> <span class="n">Get</span> <span class="n">statistics</span> <span class="n">on</span> <span class="n">FAN</span><span class="o">-</span><span class="n">C</span> <span class="n">pipeline</span> <span class="n">steps</span>
<span class="n">subset</span>            <span class="p">[</span><span class="n">deprecated</span><span class="p">]</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">Hic</span> <span class="nb">object</span> <span class="n">by</span> <span class="n">subsetting</span>
</pre></div>
</div>
<section id="Positional Arguments">
<h3>Positional Arguments<a class="headerlink" href="#Positional Arguments" title="Permalink to this heading"></a></h3>
<dl class="option-list">
<dt><kbd>command</kbd></dt>
<dd><p>Subcommand to run</p>
</dd>
</dl>
</section>
<section id="Named Arguments">
<h3>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this heading"></a></h3>
<dl class="option-list">
<dt><kbd>-V, --version</kbd></dt>
<dd><p>Print version information</p>
</dd>
<dt><kbd>--verbose, -v</kbd></dt>
<dd><p>Set verbosity level: Can be chained like “-vvv” to increase verbosity. Default is to show errors, warnings, and info messages (same as “-vv”). “-v” shows only errors and warnings,  “-vvv” shows errors, warnings, info, and debug messages.</p>
</dd>
<dt><kbd>-s, --silent</kbd></dt>
<dd><p>Do not print log messages to command line.</p>
</dd>
<dt><kbd>-l, --log-file</kbd></dt>
<dd><p>Path to file in which to save log.</p>
</dd>
<dt><kbd>-m, --email</kbd></dt>
<dd><p>Email address for fanc command summary.</p>
</dd>
<dt><kbd>--smtp-server</kbd></dt>
<dd><p>SMTP server in the form smtp.server.com[:port].</p>
</dd>
<dt><kbd>--smtp-username</kbd></dt>
<dd><p>SMTP username.</p>
</dd>
<dt><kbd>--smtp-password</kbd></dt>
<dd><p>SMTP password.</p>
</dd>
<dt><kbd>--smtp-sender-address</kbd></dt>
<dd><p>SMTP sender email address.</p>
</dd>
</dl>
</section>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this heading"></a></h2>
<p>You can set the verbosity level of any <code class="docutils literal notranslate"><span class="pre">fanc</span></code> subcommand with the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option. Use
more or less v’s for more or less logging output. The default is <code class="docutils literal notranslate"><span class="pre">-vv</span></code>, which
corresponds to error, warning, and info messages. <code class="docutils literal notranslate"><span class="pre">-vvv</span></code> also displays debug messages,
which might be helpful to identify issues with an analysis. <code class="docutils literal notranslate"><span class="pre">-v</span></code> only displays error
and warning messages. To disable logging completely, use the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option.</p>
<p>By default, logging output is sent to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>. You can redirect log messages to a file
using <code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">&lt;file</span> <span class="pre">name&gt;</span></code>.</p>
</section>
<section id="email-notifications">
<h2>Email notifications<a class="headerlink" href="#email-notifications" title="Permalink to this heading"></a></h2>
<p>Sometimes it is convenient to be notified by email if a <code class="docutils literal notranslate"><span class="pre">fanc</span></code> command finishes,
especially for long-running commands such as <code class="docutils literal notranslate"><span class="pre">fanc</span> <span class="pre">pairs</span></code> or <code class="docutils literal notranslate"><span class="pre">fanc</span> <span class="pre">map</span></code>. You can
instruct <code class="docutils literal notranslate"><span class="pre">fanc</span></code> to send an email when a command finished using <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">&lt;email</span> <span class="pre">address&gt;</span></code>.
You must also specify the SMTP server settings using the options
<code class="docutils literal notranslate"><span class="pre">--smtp-&lt;server|username|password|sender-address&gt;</span></code>, or you can pre-configure these using
the <a class="reference internal" href="#fanc-config-files"><span class="std std-ref">FAN-C config files</span></a>.</p>
</section>
<section id="temporary-files">
<h2>Temporary files<a class="headerlink" href="#temporary-files" title="Permalink to this heading"></a></h2>
<p>Many of the more computationally intensive FAN-C commands support the <code class="code docutils literal notranslate"><span class="pre">-tmp</span></code>
argument. This instructs the command to copy all input files to a temporary directory
before processing. Similarly, output files will intitially generated in the temporary
directory and only copied to their intended output locations once the command completes.</p>
<p>This can be very effective when your data is located, for example, on a network file
system or a slow external HDD, while your local machine or computing node has access
to a fast SSD. Using <code class="code docutils literal notranslate"><span class="pre">-tmp</span></code>, and assuming the local machine’s default temporary
directory resides on an SSD, files are copied from their original location to the SSD
at the start of the command, thus avoiding the slow file system access throughout the
remainder of the processing steps.</p>
<p>You can change the default temporary directory by setting the <code class="code docutils literal notranslate"><span class="pre">TMPDIR</span></code> environment
variable on your local system to a folder of your choice.</p>
</section>
<section id="fan-c-config-files">
<span id="fanc-config-files"></span><h2>FAN-C config files<a class="headerlink" href="#fan-c-config-files" title="Permalink to this heading"></a></h2>
<p>FAN-C supports configuration files, which can be located (in descending order of priority)</p>
<ul class="simple">
<li><p>in the current directory, named <code class="docutils literal notranslate"><span class="pre">fanc.conf</span></code></p></li>
<li><p>in a path specified by the Unix environment variable <code class="docutils literal notranslate"><span class="pre">FANC_CONF</span></code></p></li>
<li><p>in the user’s home folder (named <code class="docutils literal notranslate"><span class="pre">fanc.conf</span></code> or <code class="docutils literal notranslate"><span class="pre">.fanc.conf</span></code>)</p></li>
<li><p>in the <code class="docutils literal notranslate"><span class="pre">.config</span></code> folder in a user’s home directory, called <code class="docutils literal notranslate"><span class="pre">fanc.conf</span></code></p></li>
<li><p>in <code class="docutils literal notranslate"><span class="pre">/etc/fanc/fanc.conf</span></code></p></li>
</ul>
<p>Settings made in one config file are overridden by settings in a file with higher priority.</p>
<p>You can write the default config file to a location of your choice using <code class="docutils literal notranslate"><span class="pre">fanc</span> <span class="pre">write-config</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">fanc</span> <span class="n">write</span><span class="o">-</span><span class="n">config</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span><span class="p">]</span> <span class="p">[</span><span class="n">config_file</span><span class="p">]</span>
</pre></div>
</div>
<section id="Positional Arguments">
<h3>Positional Arguments<a class="headerlink" href="#Positional Arguments" title="Permalink to this heading"></a></h3>
<dl class="option-list">
<dt><kbd>config_file</kbd></dt>
<dd><p>Output file for default configuration.</p>
</dd>
</dl>
</section>
<section id="Named Arguments">
<h3>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this heading"></a></h3>
<dl class="option-list">
<dt><kbd>-f, --force</kbd></dt>
<dd><p>Force overwrite of existing config file.</p>
</dd>
</dl>
</section>
<p>An explanation of the different settings can be found as comments in the default config file.
The file is written in <a class="reference external" href="https://yaml.org/">YAML</a></p>
</section>
<section id="numexpr-threadpool-configuration">
<span id="fanc-numexpr"></span><h2>NumExpr ThreadPool configuration<a class="headerlink" href="#numexpr-threadpool-configuration" title="Permalink to this heading"></a></h2>
<p>FAN-C uses PyTables for fast querying of most of its storage classes. <a class="reference external" href="https://www.pytables.org/usersguide/libref/structured_storage.html#tables.Table.where">Condition-based queries
in PyTables</a>,
which are used, for example, to find regions and pixels in certain matrix subsets,
rely on the NumExpr package. NumExpr can be multi-threaded, and FAN-C uses the default NumExpr
ThreadPool configuration (typically 8 threads). There is generally no need to change this
preset, but if you want to optimise every single aspect of your pipeline, you may want to
take a look at
<a class="reference external" href="https://numexpr.readthedocs.io/projects/NumExpr3/en/latest/user_guide.html#threadpool-configuration">this NumExpr help page</a>
.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../fanc.html" class="btn btn-neutral float-left" title="FAN-C command line tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compatibility.html" class="btn btn-neutral float-right" title="Working with Cooler, Juicer, and text files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Kai Kruse, Vaquerizas lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>